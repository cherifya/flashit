(function(){var%20overlayPanel=null;var%20overlayPanelContent=null;runBookmarklet();function%20customURL(url){if(url.indexOf('maps.google.')!=-1){return%20document.getElementById('link').href;}else{return%20url;}}function%20getSelected(){if(window.getSelection){return%20window.getSelection();}else%20if(document.getSelection){return%20document.getSelection();}else%20if(document.selection){return%20document.selection.createRange().text;}return%20false;}function%20buildQrCodeURL(link){var%20url="https://chart.googleapis.com/chart?cht=qr&chs=250x250&chl="+encodeURIComponent(link);return%20url;}function%20loadCss(){var%20css='#qrPanel%20{%20background-color:%20rgba(0,0,0,0.9);%20position:fixed;%20width:100%;%20height:100%;%20top:0;%20z-index:1000;%20text-align:center;}%20';css=css+'#qrPanel%20#qrPanelContent%20{position:%20relative;%20background-color:%20lightgray;%20width:400px;%20height:400px;%20margin-top:%20100px;%20margin-left:%20auto;%20margin-right:auto;%20%20text-align:center;%20padding:%2020px;%20border-radius:%2010px;%20border:solid%203px%20gray;}%20';css=css+'#qrPanel%20#qrPanelContent%20p{text-align:%20left;%20font-size:small;%20font-family:%20geneva;%20color:black;}';css=css+'#qrPanel%20.qrcode%20{%20%20position:relative;%20margin-top:%2040px;%20margin-left:%20auto;%20margin-right:%20auto;%20}%20';css=css+'#qrPanel%20#closeDiv%20{%20%20position:absolute;%20top:5px;%20right:10px;%20color:%20black;%20font-weight:bold;%20cursor:pointer;}%20#closeDiv:hover%20{text-decoration:%20underline;}%20';var%20style=document.createElement('style');style.innerHTML=css;document.head.appendChild(style);}function%20closePanel(){if(overlayPanel){document.body.removeChild(overlayPanel);overlayPanel=overlayPanelContent=null;}}function%20createOverlay(){loadCss();overlayPanel=document.createElement("div");overlayPanel.setAttribute("id","qrPanel");overlayPanel.onclick=closePanel;document.body.appendChild(overlayPanel);overlayPanelContent=document.createElement("div");overlayPanelContent.setAttribute("id","qrPanelContent");overlayPanelContent.innerHTML='<p>Please%20scan%20the%20flashcode%20below%20with%20your%20smartphone%20to%20load%20the%20current%20page.<br/>Don\'t%20have%20a%20flashcode%20scanner?%20Try%20<b><a%20href="http://www.flashcode.fr">FlashCode</a></b>%20app.</p>';overlayPanel.appendChild(overlayPanelContent);var%20closeDiv=document.createElement("a");closeDiv.setAttribute("id","closeDiv");closeDiv.innerHTML='close';closeDiv.onclick=closePanel;overlayPanelContent.appendChild(closeDiv);}function%20showQrCode(qrCodeUrl){if(!overlayPanel){createOverlay();}var%20img=document.createElement("img");img.setAttribute("src",qrCodeUrl);img.setAttribute("class","qrcode");overlayPanelContent.appendChild(img);}function%20runBookmarklet(){var%20selectedText=getSelected();var%20qrData=(selectedText==false)?customURL(document.location.href):selectedText;var%20qrCodeUrl=buildQrCodeURL(qrData);showQrCode(qrCodeUrl);}})();